@model ElectronicJova.Models.ViewModels.DashboardVM

<div class="print-template ticket-wrapper" style="padding: 1.5cm;">
    <div class="ticket-header">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div>
                <h1 style="margin: 0; color: #000; font-size: 24pt;">ELECTRONIJOVA</h1>
                <p style="margin: 5px 0 0 0; font-size: 10pt; font-weight: bold;">REPORTE DE RENDIMIENTO COMERCIAL</p>
            </div>
            <div style="text-align: right;">
                <p style="margin: 0; font-size: 9pt;">Generado por: Administrador del Sistema</p>
                <p style="margin: 2px 0; font-size: 10pt; font-weight: bold;">Fecha: @DateTime.Now.ToString("dd MMMM yyyy HH:mm")</p>
            </div>
        </div>
    </div>

    <!-- KPI Summary Section -->
    <div style="display: flex; gap: 20px; margin-bottom: 2.5rem;">
        <div style="flex: 1; border: 1px solid #000; padding: 15px; text-align: center;">
            <p style="margin: 0; font-size: 9pt; text-transform: uppercase; color: #666;">Ventas Hoy</p>
            <h3 style="margin: 10px 0 0 0; font-size: 20pt;">@Model.TotalSalesToday.ToString("c")</h3>
        </div>
        <div style="flex: 1; border: 1px solid #000; padding: 15px; text-align: center;">
            <p style="margin: 0; font-size: 9pt; text-transform: uppercase; color: #666;">Pedidos Pendientes</p>
            <h3 style="margin: 10px 0 0 0; font-size: 20pt;">@Model.PendingOrders</h3>
        </div>
        <div style="flex: 1; border: 1px solid #000; padding: 15px; text-align: center;">
            <p style="margin: 0; font-size: 9pt; text-transform: uppercase; color: #666;">Productos Activos</p>
            <h3 style="margin: 10px 0 0 0; font-size: 20pt;">@Model.TotalProducts</h3>
        </div>
    </div>

    <!-- Sales trend section -->
    <div style="margin-bottom: 3rem; border: 1px solid #eee; padding: 20px; background: #fafafa;">
        <h4 style="margin: 0 0 15px 0; border-bottom: 1px solid #ccc; padding-bottom: 5px;">Rendimiento de Ventas (Últimos 7 días)</h4>
        <div style="text-align: center;">
            <img id="print-chart-img" style="display: none; width: 100%; max-height: 350px; object-fit: contain;" />
            <p id="chart-loading-msg" style="color: #888; font-size: 9pt;">[ El gráfico se incluirá automáticamente al imprimir ]</p>
        </div>
    </div>

    <!-- Top Products Table -->
    <div style="page-break-inside: avoid;">
        <h4 style="margin: 0 0 10px 0; border-bottom: 1px solid #333; padding-bottom: 5px;">Listado de Productos Más Vendidos / Alerta de Stock</h4>
        <table class="ticket-table">
            <thead>
                <tr style="background: #f0f0f0 !important;">
                    <th>PRODUCTO</th>
                    <th style="text-align: right;">PRECIO</th>
                    <th style="text-align: center;">STOCK</th>
                    <th style="text-align: center;">ESTADO</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var p in Model.TopProducts)
                {
                    <tr>
                        <td>
                            <div style="font-weight: bold;">@p.Name</div>
                            <small style="color: #666;">ID: @p.Id | Modelo: @p.Model</small>
                        </td>
                        <td style="text-align: right;">@p.Price.ToString("c")</td>
                        <td style="text-align: center;">@p.Stock</td>
                        <td style="text-align: center;">
                            @if (p.Stock <= 5) { <span style="color: #d9534f; font-weight: bold;">ALERTA BAJO</span> }
                            else { <span style="color: #5cb85c;">SUFICIENTE</span> }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <div style="margin-top: 50px; font-size: 9pt; color: #777;">
        <p><strong>Nota:</strong> Este es un reporte generado automáticamente para fines administrativos internos.</p>
        <p>© 2026 ElectronicJova Sistema de Gestión Integral.</p>
    </div>
</div>
